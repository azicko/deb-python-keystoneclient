From bb536dd5d11b88b559f22ff2d5bcd462709ad29a Mon Sep 17 00:00:00 2001
From: Corey Bryant <corey.bryant@canonical.com>
Date: Tue, 11 Aug 2015 15:45:59 -0400
Subject: [PATCH] Iterate over copy of session.adapters keys in Python2/3
Forwarded: https://review.openstack.org/211731

Iterate over a copy of session.adapters keys in both Python 2.x and
Python 3.x.  In Python 3.x, keys() is not a copy, and therefore
items can't be popped from it while iterating.

Change-Id: I4c7ac6e9f69eb409aa991f97ebde6f1581cd27b7
Closes-Bug: #1483872
---
 keystoneclient/session.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/keystoneclient/session.py b/keystoneclient/session.py
index cace4f7..113eed7 100644
--- a/keystoneclient/session.py
+++ b/keystoneclient/session.py
@@ -130,7 +130,7 @@ class Session(object):
         if not session:
             session = requests.Session()
             # Use TCPKeepAliveAdapter to fix bug 1323862
-            for scheme in session.adapters.keys():
+            for scheme in list(session.adapters):
                 session.mount(scheme, TCPKeepAliveAdapter())
 
         self.auth = auth
-- 
2.1.4

